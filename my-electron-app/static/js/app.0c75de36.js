(function(){"use strict";var t={6413:function(t,e,i){var s=i(6369),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],l=i(1001),r={},o=(0,l.Z)(r,a,n,!1,null,null,null),u=o.exports,c=i(2631),p=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("el-button",{on:{click:t.handleInsert}},[t._v("添加商品")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.skuList,stripe:""},on:{"selection-change":t.handleSelection}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{prop:"spuId",label:"spu_id",width:"180"}}),e("el-table-column",{attrs:{prop:"title",label:"标题",width:"180"}}),e("el-table-column",{attrs:{prop:"images",label:"图片",width:"180"},scopedSlots:t._u([{key:"default",fn:function(i){return t._l(i.row.images,(function(t,i){return e("img",{key:i,attrs:{src:t,height:"50",width:"50"}})}))}}])}),e("el-table-column",{attrs:{prop:"price",label:"价格"}}),e("el-table-column",{attrs:{prop:"param",label:"参数"},scopedSlots:t._u([{key:"default",fn:function(i){return t._l(i.row.param,(function(i,s,a){return e("div",[t._v(" "+t._s(s)+" "),e("el-tag",{attrs:{type:"success"}},[t._v(t._s(i))])],1)}))}}])}),e("el-table-column",{attrs:{prop:"valid",label:"是否有效"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tag",{attrs:{type:i.row.valid?"success":"danger"}},[t._v(t._s(i.row.valid?"有效":"无效"))])]}}])}),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e("el-table-column",{attrs:{prop:"lastUpdateTime",label:"更新时间"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleEdit(i.$index,i.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(i.$index,i.row)}}},[t._v("删除")])]}}])})],1),e("el-button",{attrs:{type:"danger",disabled:0===t.selectIds.length},on:{click:t.batchDelete}},[t._v("批量删除")]),e("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[[e("el-form",{ref:"skuForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.skuForm}},[e("el-form-item",{attrs:{label:"spu"}},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleChangeSpu},model:{value:t.skuForm.spuId,callback:function(e){t.$set(t.skuForm,"spuId",e)},expression:"skuForm.spuId"}},t._l(t.spuList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.skuForm.title,callback:function(e){t.$set(t.skuForm,"title",e)},expression:"skuForm.title"}})],1),e("el-form-item",{attrs:{label:"价格"}},[e("el-input",{attrs:{placeholder:"请输入价格"},model:{value:t.skuForm.price,callback:function(e){t.$set(t.skuForm,"price",e)},expression:"skuForm.price"}})],1),e("el-form-item",{attrs:{label:"图片"}},[e("el-upload",{attrs:{multiple:"",action:"",limit:3,"on-change":t.handleChange,"on-remove":t.handleRemove,"auto-upload":!1,"file-list":t.fileList,"on-exceed":t.handleExceed}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:t.resetFileCount},slot:"trigger"},[t._v("选取文件")]),e("el-button",{attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")])],1)],1),t._l(t.defaultParams,(function(i,s){return 0!==t.defaultParams.length?e("el-form-item",{key:s,staticStyle:{border:"1px solid red"},attrs:{label:i.name}},[t._l(i.details.desc,(function(s,a){return e("el-radio",{key:a,attrs:{label:s},model:{value:t.skuForm.param[i.name],callback:function(e){t.$set(t.skuForm.param,i.name,e)},expression:"skuForm.param[item.name]"}},[t._v(t._s(s))])}))],2):t._e()})),e("el-form-item",{attrs:{label:"是否有效"}},[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.skuForm.valid,callback:function(e){t.$set(t.skuForm,"valid",e)},expression:"skuForm.valid"}})],1)],2)],e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],2)],1)},d=[],h={name:"SKU",data(){return{selectIds:[],flag:0,defaultParams:[],oldFileList:[],fileList:[],fileCount:0,spuList:[],skuForm:{spuId:1,images:{},price:1,param:{},valid:!0,title:""},dialogVisible:!1,skuList:[]}},methods:{batchDelete(){let t="/sku/batchDelete?";this.selectIds.forEach((e=>{t+="ids="+e+"&"})),this.deleteRequest(t).then((t=>{t&&this.initSku()}))},handleSelection(t){this.selectIds=t.map((t=>t.id))},handleRemove(t,e){this.fileList=e},handleChangeSpu(t){this.initParamsByspuId(t)},handleInsert(){this.flag=0,this.initForm(),this.initParamsByspuId(1),this.dialogVisible=!0},initForm(){this.skuForm.param={},this.skuForm.images={},this.skuForm.valid=!0,this.skuForm.title="",this.skuForm.spuId=1,this.skuForm.price="",this.skuForm.id="",this.fileList=[]},submitForm(){this.$refs["skuForm"].validate((t=>{t&&(0===this.flag&&this.postRequest("/sku",this.skuForm).then((t=>{t&&(this.initSku(),this.initForm(),this.dialogVisible=!1)})),1===this.flag&&this.putRequest("/sku",this.skuForm).then((t=>{t&&(this.initSku(),this.initForm(),this.dialogVisible=!1)})))}))},submitUpload(){console.log(this.fileList),0!==this.fileList.length?this.uploadFile():this.$message.warning("请先选择上传文件！")},uploadFile(){var t=new FormData;this.fileList.forEach((e=>{t.append("multipartFiles",e.raw)})),console.log(t),this.postRequest("/sku/upload",t,{"Content-Type":"multipart/form-data"}).then((({data:t})=>{this.skuForm.images=t.desc}))},handleExceed(t,e){this.$message.warning(`当前限制3个文件，本次选择了${t.length},共选择了${t.length+e.length}个`)},resetFileCount(){this.fileCount=0},handleChange(t,e){this.oldFileList=Object.assign(this.fileList);let i=this.oldFileList.some((e=>e.name===t.name));if(i)return this.$message.warning("请勿重复上传文件"),void e.pop();this.fileList=e,this.fileCount++},initSpu(){this.getRequest("/spu").then((t=>{this.spuList=t}))},handleEdit(t,e){this.flag=1,this.skuForm=JSON.parse(JSON.stringify(e)),this.initParamsByspuId(e.spuId),this.dialogVisible=!0},initParamsByspuId(t){this.getRequest("/sku/params/"+t).then((t=>{t[0]?(t.forEach((t=>{t&&(t.details=JSON.parse(t.details))})),this.defaultParams=t):this.defaultParams=[]}))},handleDelete(t,e){this.deleteRequest("/sku/"+e.id).then((t=>{t&&this.initSku()}))},initSku(){this.getRequest("/sku"+this.$route.path).then((t=>{t.records.forEach((t=>{t.images=JSON.parse(t.images),t.param=JSON.parse(t.param)})),this.skuList=t.records}))}},watch:{$route(t,e){this.initSku()}},mounted(){this.initSpu(),this.initSku()}},m=h,f=(0,l.Z)(m,p,d,!1,null,"62cd69ae",null),g=f.exports,b=function(){var t=this,e=t._self._c;return e("el-container",[e("el-aside",{attrs:{width:"400px"}},[e("div",{staticStyle:{display:"flex"}},[e("el-tag",{attrs:{type:"success"}},[t._v("商品title")]),e("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.pagination.title,callback:function(e){t.$set(t.pagination,"title",e)},expression:"pagination.title"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("搜索")])],1),e("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.$route.path},on:{select:t.handleSelectMenu}},t._l(t.spuList,(function(i,s){return e("el-menu-item",{key:i.id,attrs:{index:"/"+i.id}},[t._v(t._s(i.title))])})),1),e("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pagination.pageSize,"current-page":t.pagination.currentPage,total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1),e("el-main",[e("router-view")],1)],1)},k=[],v=(i(7658),{name:"SkuHome",data(){return{spuList:[],pagination:{currentPage:1,pageSize:4,title:"",total:0}}},methods:{handleSearch(){this.initSpu(),this.pagination.currentPage=1},handleSelectMenu(t,e){this.$router.push(t)},handleCurrentChange(t){this.pagination.currentPage=t,this.initSpu(),this.$router.push("/"+((this.pagination.currentPage-1)*this.pagination.pageSize+1))},initSpu(){let t="?";Object.keys(this.pagination).forEach((e=>{t+=e+"="+this.pagination[e]+"&"})),this.getRequest("/spu/getByPage"+t).then((t=>{this.spuList=t.records,this.pagination.currentPage=t.current,this.pagination.pageSize=t.size,this.pagination.total=t.total}))}},mounted(){this.initSpu(),this.$router.push("/1")}}),y=v,S=(0,l.Z)(y,b,k,!1,null,"0f93f252",null),F=S.exports;s["default"].use(c.ZP);const _=c.ZP.prototype.push,w=c.ZP.prototype.replace;c.ZP.prototype.push=function(t){return _.call(this,t).catch((t=>t))},c.ZP.prototype.replace=function(t){return w.call(this,t).catch((t=>t))};const $=[{path:"/",name:"sku",component:F,children:[{path:":id",name:"sku",component:g}]}],P=new c.ZP({routes:$,mode:"hash"});var x=P,L=i(3822);s["default"].use(L.ZP);var C=new L.ZP.Store({state:{currentSpu:"/1"},getters:{},mutations:{setCurrentSpu(t,e){t.currentSpu=e}},actions:{},modules:{}}),O=i(8499),I=i.n(O),Z=i(4161);Z.Z.interceptors.response.use((function({data:t}){if(console.log(t),500!==t.code)return t.msg&&O.Message.success(t.msg),t;t.msg?O.Message.error(t.msg):O.Message.error("业务错误")}),(function(t){O.Message.error("服务器错误")}));let R="";const q=(t,e,i)=>(0,Z.Z)({method:"post",url:`${R}${t}`,data:e,header:i}),j=(t,e)=>(0,Z.Z)({method:"put",url:`${R}${t}`,data:e}),z=t=>(0,Z.Z)({method:"delete",url:`${R}${t}`}),E=t=>(0,Z.Z)({method:"get",url:`${R}${t}`});s["default"].use(I()),s["default"].prototype.getRequest=E,s["default"].prototype.postRequest=q,s["default"].prototype.deleteRequest=z,s["default"].prototype.putRequest=j,s["default"].config.productionTip=!1,Z.Z.defaults.baseURL="http://192.168.183.1:8090",new s["default"]({router:x,store:C,render:t=>t(u)}).$mount("#app")}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var n=e[s]={id:s,loaded:!1,exports:{}};return t[s](n,n.exports,i),n.loaded=!0,n.exports}i.m=t,function(){i.amdO={}}(),function(){var t=[];i.O=function(e,s,a,n){if(!s){var l=1/0;for(c=0;c<t.length;c++){s=t[c][0],a=t[c][1],n=t[c][2];for(var r=!0,o=0;o<s.length;o++)(!1&n||l>=n)&&Object.keys(i.O).every((function(t){return i.O[t](s[o])}))?s.splice(o--,1):(r=!1,n<l&&(l=n));if(r){t.splice(c--,1);var u=a();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,a,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,n,l=s[0],r=s[1],o=s[2],u=0;if(l.some((function(e){return 0!==t[e]}))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(o)var c=o(i)}for(e&&e(s);u<l.length;u++)n=l[u],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(c)},s=self["webpackChunkshop_web"]=self["webpackChunkshop_web"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(6413)}));s=i.O(s)})();
//# sourceMappingURL=app.0c75de36.js.map